language: java
sudo: false

notifications:
  email: false

install: skip

before_install:
  - sudo apt-get install jq
  - wget -O ~/codacy-coverage-reporter-assembly-latest.jar $(curl https://api.github.com/repos/codacy/codacy-coverage-reporter/releases/latest | jq -r .assets[0].browser_download_url)
    
after_success:
  - java -jar ~/codacy-coverage-reporter-assembly-latest.jar report -l Java -r build/reports/jacoco/test/jacocoTestReport.xml
  - bash <(curl -Ls https://coverage.codacy.com/get.sh)

jdk: openjdk8

script:
  - ./gradlew check
  - ./gradlew build check
  
deploy:
  provider: heroku
  api_key:
    secure: aeI49KKmhzA0jJEjZ5vA3inu1n2pjg+EcwqOe+UI0iFsXFZ7LNIkwauUv5M8BtniCWc4b9XYNJ9UL6hMD33AvMcLIfZ3Y06kJKquMU92rhEZNtxUvb41rBtMUtZQC86b/j5nkzjxnjYh/YysA+4ryOc269Lqto+soKUULF2ODgEPs8c4CLvsuXHIRgx8IgVHCNqWEi0D2S0l8+SM1RjejYGDFqd/+bAUdSbfNzrAGYt8kpgP669Ei4fGlztImYEJChaC7lsHg9cLcqzB2zxxRLhKRMmp9x3Tn4RJ6c1X9H72UH20TU51SBYi6g7FuJfKczqJhW83KzS5Tl1Mbi/PVP2jlegYcXSrfzRboL3AuKHMEYJPUvl4crGQoyMcc7UuUvQznraHyiGDWnCQNxRjMS22eQSy1goXDupWwIZy1p1YFcIRlK9z308Xhc9yymUpattzt8u/dWqW2PZimwi3//kkLn6LRAmwN5gCde72thwKFyJfP8Jn/htVhDBel87BRJ/RzX1pjQsomrbGZNul35UysqJ++H0fpk/31lIiOvnjzwHg9gowr8Fq3XwYPb0JbInsA9BnV9MEMhokT+pzjw3PaKRIsceZQYNOS/9nA50Ot65C5Fcp8odo9olXNOYbgHmr017rz8oo1zdqefraFDeVJlq9iMeW1emqgQYpVvE=
  app:
    master: desapp-back-master
